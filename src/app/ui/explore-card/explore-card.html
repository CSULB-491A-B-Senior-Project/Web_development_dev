<div class="card" [attr.data-post-type]="postType()">
  <div class="row header">
    <div class="username-follow">
      <div class="username">{{ username() }}</div>
      <button *ngIf="isArtist()" class="follow" type="button">Follow</button>
      <!-- Post Type Badge -->
      <div class="post-type-badge" [ngClass]="'badge-' + postType()">
        <svg *ngIf="postTypeIcon() === 'comment'" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M21 11.5a8.4 8.4 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.4 8.4 0 01-3.8-.9L3 21l1.9-5.7a8.4 8.4 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.4 8.4 0 013.8-.9h.5a8.5 8.5 0 018 8z" />
        </svg>
        <svg *ngIf="postTypeIcon() === 'star'" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 2l3 6 6.7 1-4.8 4.7 1.2 6.6L12 17l-6.1 3.3 1.2-6.6L2.3 9 9 8z" />
        </svg>
        <svg *ngIf="postTypeIcon() === 'album'" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 14a4 4 0 110-8 4 4 0 010 8zm0-6a2 2 0 100 4 2 2 0 000-4z" />
        </svg>
        <span>{{ postTypeLabel() }}</span>
      </div>
    </div>
    <span class="date" *ngIf="dateLabel()">{{ dateLabel() }}</span>
  </div>

  <div class="thumb">
    <img [src]="imageUrl()"
         [alt]="title()"
         (error)="usePlaceholder($event)" />
  </div>

  <div class="row title-line">
    <h3 class="title">{{ title() }}</h3>
  </div>

  <!-- Show comment content if it's a comment post -->
  <div class="post-content" *ngIf="showPostContent()">
    <p>{{ postContent() }}</p>
  </div>

  <div class="genres" *ngIf="(genres()?.length || 0) > 0">
    <span class="chip" *ngFor="let g of visibleGenres()">{{ g }}</span>
    <span class="chip more" *ngIf="extraCount() > 0">+{{ extraCount() }} more</span>
  </div>

  <div class="row meta">
    <span class="item">
      <!-- heart -->
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 21s-6.7-4.2-9.3-7C-1 10.1 2.4 3 8 5.2 10 6 12 8 12 8s2-2 4-2.8C21.6 3 25 10.1 21.3 14c-2.6 2.8-9.3 7-9.3 7z" />
      </svg>
      <span>{{ formattedFavorites() }} favorites</span>
    </span>

    <span class="item" *ngIf="rating() > 0">
      <!-- star -->
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 2l3 6 6.7 1-4.8 4.7 1.2 6.6L12 17l-6.1 3.3 1.2-6.6L2.3 9 9 8z" />
      </svg>
      <span>{{ rating() }}</span>
    </span>

    <a class="view-more" [routerLink]="viewLink()">View more</a>
  </div>
</div>
