<div class="page-wrapper">
  <!-- Loading State -->
  <div *ngIf="loading()" class="loading-state">
    <p>Loading feed...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error()" class="error-state">
    <p>{{ error() }}</p>
    <button (click)="loadFeed()">Retry</button>
  </div>
  
  <div class="card-container" *ngIf="!loading() && !error()">
    <div class="welcome-txt">
      <h1>
        Welcome,
      </h1>
      <h1 class="profile-txt" routerLink="/profile">{{ username }}</h1>
    </div>
    <div class="divider" role="separator"></div>
    <div class="cards" *ngIf="!loading() && !error()">
      <app-explore-card *ngFor="let it of items(); trackBy: trackById"
                        [username]="it.username"
                        [title]="it.title"
                        [genres]="it.genres"
                        [dateLabel]="it.dateLabel"
                        [imageUrl]="it.imageUrl"
                        [isArtist]="it.isArtist"
                        [favorites]="it.favorites"
                        [rating]="it.rating"
                        [averageRating]="it.averageRating"
                        [viewLink]="['/albums', it.id]"
                        [postType]="it.postType"
                        [postContent]="it.postContent">
      </app-explore-card>
    </div>
    <!-- Empty State -->
    <div *ngIf="!loading() && !error() && items().length === 0" class="empty-state">
      <p>No posts to display</p>
    </div>

    <!-- Loading More Indicator -->
    <div *ngIf="loadingMore()" class="loading-more">
      <p>Loading more...</p>
    </div>

    <!-- End of Feed -->
    <div *ngIf="!loading() && !loadingMore() && !hasMore() && items().length > 0" class="end-of-feed">
      <p>You've reached the end!</p>
    </div>
  </div>
  

</div>

<app-list-create #listCreateOverlay></app-list-create>
